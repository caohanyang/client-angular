(function(p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define([],p):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=p()})(function(){return function g(m,c,h){function l(a,b){if(!c[a]){if(!m[a]){var d="function"==typeof require&&require;if(!b&&d)return d(a,!0);if(f)return f(a,!0);d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d;}d=c[a]={exports:{}};
m[a][0].call(d.exports,function(d){var b=m[a][1][d];return l(b?b:d)},d,d.exports,g,m,c,h)}return c[a].exports}for(var f="function"==typeof require&&require,e=0;e<h.length;e++)l(h[e]);return l}({1:[function(g,m,c){function h(a,d){var b={},k;for(k in a)b[k]=1;for(var n in d)delete b[n];return Object.keys(b)}function l(a){var d={};a.forEach(function(a){for(var b in a)d[b]=(d[b]||0)+1});a=a.length;for(var b in d)d[b]<a&&delete d[b];return Object.keys(d)}function f(a){return void 0===a?"undefined":null===
a?"null":Array.isArray(a)?"array":typeof a}function e(a,c,e){function f(d,b){var k=g[d+","+b];if(void 0===k){if(n(a[d-1],c[b-1]))k=f(d-1,b-1);else{k=[];if(0<d){var e=f(d-1,b);k.push({operations:e.operations.concat({op:"remove",index:d-1}),cost:e.cost+1})}0<b&&(e=f(d,b-1),k.push({operations:e.operations.concat({op:"add",index:d-1,value:c[b-1]}),cost:e.cost+1}));0<d&&0<b&&(e=f(d-1,b-1),k.push({operations:e.operations.concat({op:"replace",index:d-1,original:a[d-1],value:c[b-1]}),cost:e.cost+1}));k=k.sort(function(a,
d){return a.cost-d.cost})[0]}g[d+","+b]=k}return k}var g={"0,0":{operations:[],cost:0}},h=f(a.length,c.length).operations.reduce(function(n,c){var f=d(n,2),g=f[0],f=f[1];if("add"===c.op){var h=c.index+1+f,h={op:c.op,path:e.add(h<a.length?String(h):"-").toString(),value:c.value};return[g.concat(h),f+1]}if("remove"===c.op)return h={op:c.op,path:e.add(String(c.index+f)).toString()},[g.concat(h),f-1];h=e.add(String(c.index+f));h=b(c.original,c.value,h);return[g.concat.apply(g,k(h)),f]},[[],0]);return d(h,
2)[0]}function a(a,d,c){var n=[];h(a,d).forEach(function(a){n.push({op:"remove",path:c.add(a).toString()})});h(d,a).forEach(function(a){n.push({op:"add",path:c.add(a).toString(),value:d[a]})});l([a,d]).forEach(function(f){n.push.apply(n,k(b(a[f],d[f],c.add(f))))});return n}function b(d,b,k){var c=f(d),h=f(b);if("array"==c&&"array"==h)return e(d,b,k);if("object"==c&&"object"==h)return a(d,b,k);d=n(d,b)?[]:[{op:"replace",path:k.toString(),value:b}];return d}var d=function(a,d){if(Array.isArray(a))return a;
if(Symbol.iterator in Object(a)){for(var b=[],k=a[Symbol.iterator](),c;!(c=k.next()).done&&(b.push(c.value),!d||b.length!==d););return b}throw new TypeError("Invalid attempt to destructure non-iterable instance");},k=function(a){if(Array.isArray(a)){for(var d=0,b=Array(a.length);d<a.length;d++)b[d]=a[d];return b}return Array.from(a)};c.diffAny=b;Object.defineProperty(c,"__esModule",{value:!0});var n=g("./equal").compare},{"./equal":2}],2:[function(g,m,c){function h(a,b){for(var d=[],k=0,c=a.length;k<
c;k++)d.push([a[k],b[k]]);return d}function l(a,b){return a.length!==b.length?!1:h(a,b).every(function(a){return e(a[0],a[1])})}function f(a,b){var d=Object.keys(a),k=Object.keys(b);return l(d,k)?d.every(function(d){return e(a[d],b[d])}):!1}function e(a,b){return a===b?!0:Array.isArray(a)&&Array.isArray(b)?l(a,b):Object(a)===a&&Object(b)===b?f(a,b):!1}c.compare=e;Object.defineProperty(c,"__esModule",{value:!0})},{}],3:[function(g,m,c){var h=function a(b,d,k){var c=Object.getOwnPropertyDescriptor(b,
d);if(void 0===c)return b=Object.getPrototypeOf(b),null===b?void 0:a(b,d,k);if("value"in c&&c.writable)return c.value;d=c.get;return void 0===d?void 0:d.call(k)},l=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(a.__proto__=b)},f=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
};Object.defineProperty(c,"__esModule",{value:!0});c.MissingError=function(a){function b(a){f(this,b);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Value required at path: "+a);this.name=this.constructor.name;this.path=a}l(b,a);return b}(Error);c.InvalidOperationError=function(a){function b(a){f(this,b);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Invalid operation: "+a);this.name=this.constructor.name;this.op=a}l(b,a);return b}(Error);c.TestError=function(a){function b(a,
k){f(this,b);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Test failed: "+a+" != "+k);this.name=this.constructor.name;this.actual=a;this.expected=k}l(b,a);return b}(Error)},{}],4:[function(g,m,c){c.applyPatch=function(a,b){return b.map(function(d){var b=f[d.op];return void 0===b?new h(d.op):b(a,d)})};c.createPatch=function(a,b){var d=new l,d=e(a,b,d);d.forEach(function(a){a.path=a.path.toString()});return d};Object.defineProperty(c,"__esModule",{value:!0});var h=g("./errors").InvalidOperationError,
l=g("./pointer").Pointer,f=function(a){return a&&a.__esModule?a:{"default":a}}(g("./patch")),e=g("./diff").diffAny;g=function(a){return a&&a.__esModule?a["default"]:a}(g("./package")).version;c.version=g},{"./diff":1,"./errors":3,"./package":5,"./patch":6,"./pointer":7}],5:[function(g,m,c){m.exports={name:"rfc6902",version:"1.1.2",description:"Complete implementation of RFC6902 (patch and diff)",keywords:["json","patch","diff","rfc6902"],homepage:"https://github.com/chbrown/rfc6902",repository:{type:"git",
url:"https://github.com/chbrown/rfc6902.git"},author:"Christopher Brown <io@henrian.com> (http://henrian.com)",license:"MIT",main:"./rfc6902.js",devDependencies:{"babel-core":"^5.0.0",babelify:"^5.0.0",browserify:"12.0.1",coveralls:"*",derequire:"2.0.3",istanbul:"*","js-yaml":"*",mocha:"*","mocha-lcov-reporter":"*",typescript:"*"},scripts:{test:"make test"}}},{}],6:[function(g,m,c){function h(a,b,c){Array.isArray(a)?"-"==b?a.push(c):a.splice(b,0,c):a[b]=c}function l(a,b){Array.isArray(a)?a.splice(b,
1):delete a[b]}c.add=function(b,c){var e=f.fromJSON(c.path).evaluate(b);if(void 0===e.parent)return new a(c.path);h(e.parent,e.key,c.value);return null};c.remove=function(b,c){var e=f.fromJSON(c.path).evaluate(b);if(void 0===e.value)return new a(c.path);l(e.parent,e.key);return null};c.replace=function(b,c){var e=f.fromJSON(c.path).evaluate(b);if(void 0===e.value)return new a(c.path);e.parent[e.key]=c.value;return null};c.move=function(b,c){var e=f.fromJSON(c.from).evaluate(b);if(void 0===e.value)return new a(c.from);
var g=f.fromJSON(c.path).evaluate(b);if(void 0===g.parent)return new a(c.path);l(e.parent,e.key);h(g.parent,g.key,e.value);return null};c.copy=function(b,c){var e=f.fromJSON(c.from).evaluate(b);if(void 0===e.value)return new a(c.from);var g=f.fromJSON(c.path).evaluate(b);if(void 0===g.parent)return new a(c.path);l(e.parent,e.key);h(g.parent,g.key,e.value);return null};c.test=function(a,c){var g=f.fromJSON(c.path).evaluate(a);return e(g.value,c.value)?null:new b(g.value,c.value)};Object.defineProperty(c,
"__esModule",{value:!0});var f=g("./pointer").Pointer,e=g("./equal").compare;g=g("./errors");var a=g.MissingError,b=g.TestError},{"./equal":2,"./errors":3,"./pointer":7}],7:[function(g,m,c){function h(c){return c.replace(/~1/g,"/").replace(/~0/g,"~")}function l(c){return c.replace(/~/g,"~0").replace(/\//g,"~1")}var f=function(){function c(a,b){for(var d in b){var e=b[d];e.configurable=!0;e.value&&(e.writable=!0)}Object.defineProperties(a,b)}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}();
Object.defineProperty(c,"__esModule",{value:!0});c.Pointer=function(){function c(a){a=void 0===a?[""]:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.tokens=a}f(c,{toString:{value:function(){return this.tokens.map(l).join("/")}},evaluate:{value:function(a){for(var b=null,c=null,e=1,f=this.tokens.length;e<f;e++)b=a,c=this.tokens[e],a=(b||{})[c];return{parent:b,key:c,value:a}}},push:{value:function(a){this.tokens.push(a)}},add:{value:function(a){a=this.tokens.concat(String(a));
return new c(a)}}},{fromJSON:{value:function(a){var b=a.split("/").map(h);if(""!==b[0])throw Error("Invalid JSON Pointer: "+a);return new c(b)}}});return c}()},{}]},{},[4])(4)});
